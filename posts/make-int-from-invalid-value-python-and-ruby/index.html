<!doctype html><html lang=ko-kr><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.110.0"><title>올바르지 않은 값을 정수로 변환하기 - 파이썬 vs 루비</title><meta name=author content="if1live"><meta name=title content="올바르지 않은 값을 정수로 변환하기 - 파이썬 vs 루비"><meta name=description content="올바르지 않은 값을 정수로 바꾸는 일은 웹을 포함한 여러가지 개발에서 자주하는 작업 중 하나이다. 예를 들어서 /articles/?id={int} 를 구현한 서버가 있다고 가정하자. /article"><meta name=keywords content="python,ruby,integer,int,exception"><meta name=naver-site-verification content="2ddc1a56777489f4a64a4f6a59822f8b1c1ea502"><meta name=google-site-verification content="VsvNNnJZUV-iLEYKNju16p-HtDqZeqL15H-VVy-HwpA"><meta name=gc:client-id content="785d47c81cbc2fd42b65"><meta name=gc:client-secret content="5e5d558f0b16fae154aa47fc9d94f7c09e540ec7"><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><script type=text/javascript>var host="if1live.github.io";host==window.location.host&&window.location.protocol!="https:"?window.location.protocol="https":console.log("skip https redirect")</script><link rel=stylesheet href=/css/style.01f2debd31367b25d1a2e360eed0f61347cb907850e4d65c6df0ec4f3349a804ff76662df734eebebf41c70ae4ad5bf520fb9f73ce4b9b59dc06aaed2f676f60.css integrity="sha512-AfLevTE2eyXRouNg7tD2E0fLkHhQ5NZcbfDsTzNJqAT/dmYt9zTuvr9BxwrkrVv1IPufc85Lm1ncBqrtL2dvYA=="><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css integrity="sha512-cbQXwDFK7lj2Fqfkuxbo5iD1dSbLlJGXGpfTDqbggqjHJeyzx88I3rfwjS38WJag/ihH7lzuGlGHpDBymLirZQ==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin=anonymous><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script>
<script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-3043297488880636",enable_page_level_ads:!0})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-SKE54STL16"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-SKE54STL16",{anonymize_ip:!1})}</script></head><body><nav class=sora-navigation><a href=https://if1live.github.io/ title=home><h1>if1live space</h1></a><ul class=menu-button-list><li><a href=https://if1live.github.io/posts/ title=archive><i class="fa-solid fa-box-archive"></i>
<span hidden>archive</span></a></li><li><a href=https://if1live.github.io/tags/ title=tags><i class="fa-solid fa-tags"></i>
<span hidden>tags</span></a></li><li><a href=//github.com/if1live title=GitHub><i class="fa-brands fa-github"></i>
<span hidden>GitHub</span></a></li><li><a href=https://if1live.github.io/about/ title=about><i class="fa-solid fa-info"></i>
<span hidden>about</span></a></li><li><a href=https://if1live.github.io/index.xml title=RSS><i class="fa-solid fa-rss"></i>
<span hidden>RSS</span></a></li></ul></nav><div class=main><section id=single><h1 class=title>올바르지 않은 값을 정수로 변환하기 - 파이썬 vs 루비</h1><div class=tip><time datetime="2016-02-24 00:00:00 +0000 UTC">2016. 02. 24</time></div><div class=content><p>올바르지 않은 값을 정수로 바꾸는 일은 웹을 포함한 여러가지 개발에서 자주하는 작업 중 하나이다.
예를 들어서 <code>/articles/?id={int}</code> 를 구현한 서버가 있다고 가정하자.
<code>/articles/?id=1234</code>와 같이 id에 정수 문자열이 들어갈수도 있다.
하지만 <code>/articles/?id=test</code>와 같이 숫자가 아닌 문자열이 들어갈수도 있고 <code>/articles/</code>처럼 id가 없을수도 있다.
개발자는 이런 예외 상황을 잘 처리해야된다.</p><p>이 글에서는 파이썬과 루비에서 문자열을 숫자로 변환할때의 차이점을 간단하게 정리했다.</p><h2 id=string-to-int>String to int</h2><h3 id=success>Success</h3><p><code>"123"</code>과 같이 딱봐도 정수처럼 보이는 문자열을 정수로 바꿔보았다.</p><pre><code class="language-python line-numbers">print(int(&#34;123&#34;))</code></pre><pre><code class="language-bash line-numbers">$ python str_to_int_success.py
123</code></pre><pre><code class="language-ruby line-numbers">puts &#34;123&#34;.to_i</code></pre><pre><code class="language-bash line-numbers">$ ruby str_to_int_success.rb
123</code></pre><p>파이썬과 루비 모두 정상적으로 작동한다.</p><h3 id=fail>Fail</h3><p><code>"fail"</code>과 같이 정수처럼 보이지 않는 문자열을 정수로 바꿔보면 어떨까?</p><pre><code class="language-python line-numbers">try:
    print(int(&#34;fail&#34;))
except Exception as e:
    print(repr(e))</code></pre><pre><code class="language-bash line-numbers">$ python str_to_int_fail.py
ValueError(&#34;invalid literal for int() with base 10: &#39;fail&#39;&#34;,)</code></pre><pre><code class="language-ruby line-numbers">begin
  p &#34;fail&#34;.to_i
rescue =&gt; ex
  p ex
end</code></pre><pre><code class="language-bash line-numbers">$ ruby str_to_int_fail.rb
0</code></pre><p>파이썬에서는 예외가 발생하지만 루비에서는 0으로 변환된다.</p><ul><li>Python: <a href=https://docs.python.org/3.5/library/functions.html#int>int()</a></li><li>Ruby: <a href=http://ruby-doc.org/core-2.3.0/String.html#method-i-to_i>String#to_i</a></li></ul><h2 id=none-to-int-nil-to-integer>None to int, nil to Integer</h2><p>파이썬에서는 None, 루비에서는 nil이라고 부르지만 둘은 비슷한 개념이다.
이것을 정수로 변환하면 어떤 결과가 나올까?</p><pre><code class="language-python line-numbers">try:
    print(int(None))
except Exception as e:
    print(repr(e))</code></pre><pre><code class="language-bash line-numbers">$ python null_to_int.py
TypeError(&#34;int() argument must be a string or a number, not &#39;NoneType&#39;&#34;,)</code></pre><pre><code class="language-ruby line-numbers">begin
  p nil.to_i
rescue =&gt; ex
  p ex
end</code></pre><pre><code class="language-bash line-numbers">$ ruby null_to_int.rb
0</code></pre><p>파이썬에서는 예외가 발생하지만 루비에서는 0으로 변환된다.</p><ul><li>Ruby: <a href=http://ruby-doc.org/core-2.3.0/NilClass.html#method-i-to_i>NilClass#to_i</a></li></ul><h2 id=동일한-동작을-하게-만드려면>동일한 동작을 하게 만드려면?</h2><p>&ldquo;파이썬에서는 예외가 나는게 정상이고 루비에서는 0으로 변환되는게 정상입니다"로 끝내기에는 간단한 문제가 아니다.
파이썬으로 작성된 코드가 있고 이것을 루비로 그대로 옮겨서 사용하고 싶다고 가정하자.
만약 파이썬 코드안에 문자열을 숫자로 바꾸는 코드가 있다면 루비로 그대로 옮겼을때 동일하게 동작한다는 보장이 없다.
예외를 던지는 것과 0으로 변환되는 것은 다른 행동이기 때문에 코드를 옮기면서 로직을 수정해야될지 모른다.
만약 파이썬처럼 루비에서도 문자열을 정수로 변환하려다 실패한 경우 예외를 던지면 포팅 작업이 더 편하지 않을까?</p><p>루비에서 파이썬처럼 예외를 던지려면 어떻게 해야될까?
<code>#to_i</code>를 이용해서 정수로 변환해보고 만약 0이 나온 경우 문자열이 <code>"0"</code>, <code>"0.00"</code>등과 같은지 확인한 다음에 예외를 던지는 식으로 구현할수 있다.
하지만 좋은 방법처럼 보이진 않는다. 더 쉬운 방법 없을까?</p><p><a href=http://ruby-doc.org/core-2.2.0/Kernel.html#method-i-Integer>Kernel#Integer</a>를 사용하면 된다.</p><pre><code class="language-ruby line-numbers">begin
  puts Integer(&#34;fail&#34;)
rescue =&gt; ex
  p ex
end</code></pre><pre><code class="language-bash line-numbers">$ ruby str_to_int_fail_alt.rb
#&lt;ArgumentError: invalid value for Integer(): &#34;fail&#34;&gt;</code></pre><pre><code class="language-ruby line-numbers">begin
  p Integer(nil)
rescue =&gt; ex
  p ex
end</code></pre><pre><code class="language-bash line-numbers">$ ruby null_to_int_alt.rb
#&lt;TypeError: can&#39;t convert nil into Integer&gt;</code></pre><p>비슷한 목적으로 <a href=http://ruby-doc.org/core-2.2.0/Kernel.html#method-i-Float>Kernel#Float</a>도 있다.
Kernel 클래스에는 유용한 기능이 많으니 한번쯤 읽어두면 나중에 도움이 될거다.
(sprintf, rand, sleep 조차 Kernel 클래스에 포함되어있다!)</p><p>반대로 파이썬에서 루비처럼 예외없이 정수로 바꾸고 싶으면 예외처리를 포함한 간단한 함수를 만들면 된다.
자세한 설명은 생략한다.</p><h2 id=summary>Summary</h2><p>문자열을 숫자로 바꾸는 작업은 단순한 기능이다.
하지만 모든 언어에서 같은 행동을 하도록 구현되진 않았다.
나중에 삽질하고 싶지 않다면 자신이 쓰는 언어에서는 어떤식으로 행동하는지 기억하자.</p><h2 id=test-code>Test Code</h2><ul><li><a href=https://github.com/if1live/libsora.so/tree/master/content/development/make-int-from-invalid-value-python-and-ruby>repo</a></li></ul></div><div class=tags><a href=https://if1live.github.io/tags/python>python</a>
<a href=https://if1live.github.io/tags/ruby>ruby</a>
<a href=https://if1live.github.io/tags/integer>integer</a>
<a href=https://if1live.github.io/tags/int>int</a>
<a href=https://if1live.github.io/tags/exception>exception</a></div><div id=comment><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//libsora.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></section></div><footer class=sora-footer><p><a href=//gohugo.io/ title=Hugo>Hugo</a> |
<a href=//twitter.com/if1live/ title=@if1live>@if1live</a></p></footer><script src=/js/main.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js integrity="sha512-BttltKXFyWnGZQcRWj6osIg7lbizJchuAMotOkdLxHxwt/Hyo+cl47bZU0QADg+Qt5DJwni3SbYGXeGMB5cBcw==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-clike.min.js integrity="sha512-/Rynaa6ehLZJO9fdk+EUsgiOdJqFSFUB4Qgy+gP4vU4U1DrmPJWypfXe1CgyaV7rRdZjGxdpLe9djxhx1ZHvqQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-c.min.js integrity="sha512-8VrjxGFLIkS0mgEmO3p46A5OkqATHhrNVwyv2V7yUeZrk1jmSDuI3SOEpC9XHEHUWEOsfzzcJeBlUkee9lKGrw==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-cpp.min.js integrity="sha512-namzGTZvHaug0jeipHRN2pMepMiJj+EbrloktVFlMYGnA0EwZhbdLeENjBYLCgoghVbZGinIz/FFYHmB0o3wLw==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js integrity="sha512-uOw7XYETzS/DPmmirpP5UCMihSDNMeyTS965J0/456OSPfxn9xEtHHjj5Q/5WefVdqyMfN/afmQnNpZd/tpkcA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js integrity="sha512-AKaNmg8COK0zEbjTdMHJAPJ0z6VeNqvRvH4/d5M4sHJbQQUToMBtodq4HaV4fa+WV2UTfoperElm66c9/8cKmQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js integrity="sha512-jwrwRWZWW9J6bjmBOJxPcbRvEBSQeY4Ad0NEXSfP0vwYi/Yu9x5VhDBl3wz6Pnxs8Rx/t1P8r9/OHCRciHcT7Q==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js integrity="sha512-xKcnbsdT0KMoA4yrozkqZM1XJVTrPsjdQwvigxlAlxEDu8YDvC/jl+LfVqn0fY3Vs6m2y4a89JCHEIA/Z9zpmQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-csharp.min.js integrity="sha512-pmt3kb6dRndjFXFFwCa3rSzuUQ0GjeCfC5QULWde+8ZBIsUzuP1heOIOSAMfAyXHSufrrTp8h7UHw85K4IJ2/g==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js integrity="sha512-whYhDwtTmlC/NpZlCr6PSsAaLOrfjVg/iXAnC4H/dtiHawpShhT2SlIMbpIhT/IL/NrpdMm+Hq2C13+VKpHTYw==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-ruby.min.js integrity="sha512-/Dti0iV9cxgJe8r0U/89YJIv9ZBQu1ExEWffVyBj4juMQ4GNglQ3TQ0Up4gcbiHvg0g87arcUFbKBtw2PxH1Dw==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-go.min.js integrity="sha512-w200Nz1i9KgDNi+IpPMgpZBVRIvfVK/V5vskyHjkz7XJkVnRJcb1uNmpiHhDv0/Ln+GG2VqScKKz/1izBfg64Q==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-less.min.js integrity="sha512-lL5HvfIycntK04Iiai/VTsyuj7mvDkhz9k+cA8fqXr932s4jLJ1YwplIs6Dhpw0pzVwAe1jGe8sGwbyuHG44QQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-scss.min.js integrity="sha512-aczOaJ+mB9uGT6dMJbDaUsS2PWG+XII+1ypFQ0L22Z132V6kMM6m70pQssXsPAFmLI5xkgx/hknBuUuJIJKZfA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js integrity="sha512-uMdVuOpm+9lNPCT7mV/YaMb9YQ/R4+eeON7aEMj6Ig/f4BoU+Q5k6iaZkDsX7LH9cjTHZt0CuKxbzd0/fndrWA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js integrity="sha512-QXFMVAusM85vUYDaNgcYeU3rzSlc+bTV4JvkfJhjxSHlQEo+ig53BtnGkvFTiNJh8D+wv6uWAQ2vJaVmxe8d3w==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-yaml.min.js integrity="sha512-6O/PZimM3TD1NN3yrazePA4AbZrPcwt1QCGJrVY7WoHDJROZFc9TlBvIKMe+QfqgcslW4lQeBzNJEJvIMC8WhA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-batch.min.js integrity="sha512-tPgIjUKiv2HcUAIWXA3v6G4cNuWXkoMsF+ibxfHLnp+/s1C3Bw5/qp78+JjhrfoyWIiHXHx0LtH4M/LAwyQqWg==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lisp.min.js integrity="sha512-W461RnQzrhSCQQMfEGFKOHbK2DuJTVxrXs2PzctPaxV3A+qPB/TcnMgucSsBNkyccNK8VoENBsAnbf/SuBE71g==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin=anonymous></script>
<script>renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]});for(var inlineMathArray=document.querySelectorAll("script[type='math/tex']"),inlineMath,tex,replaced,displayMathArray,displayMath,i=0;i<inlineMathArray.length;i++)inlineMath=inlineMathArray[i],tex=inlineMath.innerText||inlineMath.textContent,replaced=document.createElement("span"),replaced.innerHTML=katex.renderToString(tex,{displayMode:!1}),inlineMath.parentNode.replaceChild(replaced,inlineMath);displayMathArray=document.querySelectorAll("script[type='math/tex; mode=display']");for(i=0;i<displayMathArray.length;i++)displayMath=displayMathArray[i],tex=displayMath.innerHTML,replaced=document.createElement("span"),replaced.innerHTML=katex.renderToString(tex.replace(/%.*/g,""),{displayMode:!0}),displayMath.parentNode.replaceChild(replaced,displayMath)</script></body></html>
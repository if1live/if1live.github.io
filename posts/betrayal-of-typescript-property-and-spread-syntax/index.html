<!doctype html><html lang=ko-kr><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.115.1"><title>타입스크립트의 배신 - property와 spread syntax - if1live space</title><meta name=author content="if1live"><meta name=title content="타입스크립트의 배신 - property와 spread syntax"><meta name=description content="준비물 property 자바스크립트의 class로 객체의 getter, setter 프로퍼티를 만들수 있다. class Rectangle { constructor(height, width) { this.height = height; this.width = width; } // Getter get area() { return this.calcArea(); } } spread syntax 자바스크립트에는 전개 구문,"><meta name=keywords content="typescript,javascript,class,property,spread syntax"><meta name=naver-site-verification content="2ddc1a56777489f4a64a4f6a59822f8b1c1ea502"><meta name=google-site-verification content="VsvNNnJZUV-iLEYKNju16p-HtDqZeqL15H-VVy-HwpA"><meta name=gc:client-id content="785d47c81cbc2fd42b65"><meta name=gc:client-secret content="5e5d558f0b16fae154aa47fc9d94f7c09e540ec7"><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><script type=text/javascript>var host="if1live.github.io";host==window.location.host&&window.location.protocol!="https:"?window.location.protocol="https":console.log("skip https redirect")</script><link rel=stylesheet href=/css/style.f2340c998d4e073dc7d9e2bca0e0c5d770466c4ad200bcc9528d7a7c240bb73ac2cb995257ae58afcf21dbc23e616a1700f146daf3f0f62c7584c4b8507359b2.css integrity="sha512-8jQMmY1OBz3H2eK8oODF13BGbErSALzJUo16fCQLtzrCy5lSV65Yr88h28I+YWoXAPFG2vPw9ix1hMS4UHNZsg=="><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css integrity="sha512-cbQXwDFK7lj2Fqfkuxbo5iD1dSbLlJGXGpfTDqbggqjHJeyzx88I3rfwjS38WJag/ihH7lzuGlGHpDBymLirZQ==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin=anonymous><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script>
<script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-3043297488880636",enable_page_level_ads:!0})</script><meta property="og:title" content="타입스크립트의 배신 - property와 spread syntax"><meta property="og:description" content="준비물 property 자바스크립트의 class로 객체의 getter, setter 프로퍼티를 만들수 있다. class Rectangle { constructor(height, width) { this.height = height; this.width = width; } // Getter get area() { return this.calcArea(); } } spread syntax 자바스크립트에는 전개 구문,"><meta property="og:type" content="article"><meta property="og:url" content="https://if1live.github.io/posts/betrayal-of-typescript-property-and-spread-syntax/"><meta property="og:image" content="https://www.gravatar.com/avatar/fb9672e7e0d256f39369595381d1ea07?size=160"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-07T00:00:00+00:00"><meta property="article:modified_time" content="2023-02-07T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.gravatar.com/avatar/fb9672e7e0d256f39369595381d1ea07?size=160"><meta name=twitter:title content="타입스크립트의 배신 - property와 spread syntax"><meta name=twitter:description content="준비물 property 자바스크립트의 class로 객체의 getter, setter 프로퍼티를 만들수 있다. class Rectangle { constructor(height, width) { this.height = height; this.width = width; } // Getter get area() { return this.calcArea(); } } spread syntax 자바스크립트에는 전개 구문,"><meta name=twitter:site content="@if1live"><script async src="https://www.googletagmanager.com/gtag/js?id=G-SKE54STL16"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-SKE54STL16",{anonymize_ip:!1})}</script></head><body><nav class=sora-navigation><a href=https://if1live.github.io/ title=home><h1>if1live space</h1></a><ul class=menu-button-list><li><a href=https://if1live.github.io/posts/ title=archive><i class="fa-solid fa-box-archive"></i>
<span hidden>archive</span></a></li><li><a href=https://if1live.github.io/tags/ title=tags><i class="fa-solid fa-tags"></i>
<span hidden>tags</span></a></li><li><a href=//github.com/if1live title=GitHub><i class="fa-brands fa-github"></i>
<span hidden>GitHub</span></a></li><li><a href=https://if1live.github.io/about/ title=about><i class="fa-solid fa-info"></i>
<span hidden>about</span></a></li><li><a href=https://if1live.github.io/index.xml title=RSS><i class="fa-solid fa-rss"></i>
<span hidden>RSS</span></a></li></ul></nav><div class=main><section id=single><h1 class=title><span>타입스크립트의 배신 - property와 spread syntax</span><br><small>class + property + spread = FAIL</small></h1><div class=tip><time datetime="2023-02-07 00:00:00 +0000 UTC">2023. 02. 07</time></div><div class=content><h2 id=준비물>준비물</h2><h3 id=property>property</h3><p>자바스크립트의 <a href=https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Classes#%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85_%EB%A9%94%EC%84%9C%EB%93%9C>class</a>로 객체의 getter, setter 프로퍼티를 만들수 있다.</p><pre><code class="language-js line-numbers">class Rectangle {
  constructor(height, width) {
    this.height = height;
    this.width = width;
  }

  // Getter
  get area() {
    return this.calcArea();
  }
}</code></pre><h3 id=spread-syntax>spread syntax</h3><p>자바스크립트에는 <a href=https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/Spread_syntax>전개 구문, spread syntax</a>가 있다.
spread syntax로 객체를 쉽게 복제할 수 있다.</p><pre><code class="language-js line-numbers">let objClone = { ...obj };</code></pre><h2 id=버그>버그</h2><p>컴파일이 잘 되는 간단한 타입스크립트 코드를 작성했다.</p><pre><code class="language-ts line-numbers">interface X {
    v: number;
}

class Y implements X {
    public get v() { return 1; }
}

const a: X = new Y();
const b: X = { ...a };
const c: X = { v: a.v };

console.log(&#39;a&#39;, a.v);
console.log(&#39;b&#39;, b.v);
console.log(&#39;c&#39;, c.v);</code></pre><p>인터페이스 X와 이를 구현한 Y를 준비한다.
인터페이스 X에는 <code>v</code> 필드가 정의되어있다.</p><p><code>a</code>는 클래스에서 만들어진 객체이다.
<code>b</code>는 <code>a</code>에 spread syntax를 적용해서 만들어진 새로운 객체이다.
<code>c</code>는 spread syntax 없이 X에 정의된 필드 각각을 손으로 연결해서 만든 객체이다.
<code>a</code>, <code>b</code>, <code>c</code>는 인터페이스 X를 구현했으니까 <code>v</code> 로 접근할 수 있다.</p><p>예상되는 출력은 다음과 같다.</p><pre class=markdown-textblock><code>[LOG]: "a",  1 
[LOG]: "b",  1
[LOG]: "c",  1 </code></pre><p>예상한 출력과 실제 결과가 같았으면 글을 쓰지 않았을거다.
실행 결과는 다음과 같다.</p><pre class=markdown-textblock><code>[LOG]: "a",  1 
[LOG]: "b",  undefined 
[LOG]: "c",  1 </code></pre><p><a href="https://www.typescriptlang.org/play?target=9&amp;module=0#code/JYOwLgpgTgZghgYwgAgBrIN4Chm+QNwC5kQBXAWwCNoBuLAXyywQBs4Bnd5ATWWHIAOLCOQjgu6bHmQDSlFsATIA5hDAEAFAEpMyKGtJQQyAIw1kjRswD2IdurjF0AXhIQA7j210Et+8konZFcMZAA6CLgLHz91BCCQgmI4MPxopl87a2EwlmtlDQByOEKAGmQU-C0YrJy8gsLKMoDU6ptaiFz8ooRmhFaaIA">https://www.typescriptlang.org/play?target=9&amp;module=0#code/JYOwLgpgTgZghgYwgAgBrIN4Chm+QNwC5kQBXAWwCNoBuLAXyywQBs4Bnd5ATWWHIAOLCOQjgu6bHmQDSlFsATIA5hDAEAFAEpMyKGtJQQyAIw1kjRswD2IdurjF0AXhIQA7j210Et+8konZFcMZAA6CLgLHz91BCCQgmI4MPxopl87a2EwlmtlDQByOEKAGmQU-C0YrJy8gsLKMoDU6ptaiFz8ooRmhFaaIA</a></p><p><code>b.v</code>가 <code>undefined</code>가 되었다.
컴파일에는 문제가 없었지만 런타임에는 의도한 결과가 나오지 않는다.</p><p>더 자세하게 뜯어보기 위해 객체 자체도 로그로 찍어보자.</p><pre><code class="language-ts line-numbers">interface X {
    v: number;
}

class Y implements X {
    public get v() { return 1; }
}

const a: X = new Y();
const b: X = { ...a };
const c: X = { v: a.v };

console.log(&#39;a&#39;, a);
console.log(&#39;a.v&#39;, a.v);

console.log(&#39;b&#39;, b);
console.log(&#39;b.v&#39;, b.v);

console.log(&#39;c&#39;, c);
console.log(&#39;c.v&#39;, c.v);</code></pre><p><a href="https://www.typescriptlang.org/play?target=9&amp;module=0#code/JYOwLgpgTgZghgYwgAgBrIN4Chm+QNwC5kQBXAWwCNoBuLAXyywQBs4Bnd5ATWWHIAOLCOQjgu6bHmQDSlFsATIA5hDAEAFAEpMyKGtJQQyAIw1kjRswD2IdurjF0AXhIQA7j210Et+8konZFcMZAA6CLgLHz91BCCQgmI4MPxopl87a2EwlmtlDQByOEKAGmQ4LRisnLyC4tSyitSqjL9siFz8osomylbM9g6u+spG8rH8VpsazrqihCaEAfba7sKEceRNqbogA">https://www.typescriptlang.org/play?target=9&amp;module=0#code/JYOwLgpgTgZghgYwgAgBrIN4Chm+QNwC5kQBXAWwCNoBuLAXyywQBs4Bnd5ATWWHIAOLCOQjgu6bHmQDSlFsATIA5hDAEAFAEpMyKGtJQQyAIw1kjRswD2IdurjF0AXhIQA7j210Et+8konZFcMZAA6CLgLHz91BCCQgmI4MPxopl87a2EwlmtlDQByOEKAGmQ4LRisnLyC4tSyitSqjL9siFz8osomylbM9g6u+spG8rH8VpsazrqihCaEAfba7sKEceRNqbogA</a></p><pre class=markdown-textblock><code>[LOG]: "a",  Y: {} 
[LOG]: "a.v",  1 
[LOG]: "b",  {} 
[LOG]: "b.v",  undefined 
[LOG]: "c",  {
  "v": 1
} 
[LOG]: "c.v",  1</code></pre><p><code>a</code>는 클래스에서 만들어진 객체라서 특별하다. property인 <code>v</code>가 콘솔 로그에는 보이지 않지만 <code>v</code>로 접근할 수 있다.
<code>b</code>는 비어있는 자바스크립트 객체이다. spread syntax로 만들었기떄문에 클래스 Y와는 관계가 없다.
<code>c</code>는 직접 만든 자바스크립트 객체이다. 원한대로 잘 돌아간다.</p><h2 id=summary>summary</h2><p>타입스크립트 컴파일을 통과해도 런타임에서 터질 수 있다.</p><p>일반 자바스크립트 객체에만 spread syntax를 적용하자.
클래스로 만들어진 객체에와 spread syntax를 같이 쓰면 프로퍼티가 사고칠 수 있다.</p><p>spread syntax를 사용했을때는 의도와 실제 동작이 달라서 문제가 생겼다.
하지만 구식 방법으로 각각의 필드를 연결하면 직접 연결하면 원하는대로 돌아간다.
새로운 기술이라고 항상 좋은게 아니다.
엑셀 팡션을 사용하지 말라는 상사의 조언을 받아들이자.</p><p><p class=markdown-image><img src=excel-function-supervisor.png alt="엑셀에 함수를 쓰지말라고 하는 상사"></p></p></div><div class=tags><a href=https://if1live.github.io/tags/typescript/>typescript</a>
<a href=https://if1live.github.io/tags/javascript/>javascript</a>
<a href=https://if1live.github.io/tags/class/>class</a>
<a href=https://if1live.github.io/tags/property/>property</a>
<a href=https://if1live.github.io/tags/spread-syntax/>spread syntax</a></div><div id=comment><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//libsora.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></section></div><footer class=sora-footer><p><a href=//gohugo.io/ title=Hugo>Hugo</a> |
<a href=//twitter.com/if1live/ title=@if1live>@if1live</a></p></footer><script src=/js/main.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js integrity="sha512-BttltKXFyWnGZQcRWj6osIg7lbizJchuAMotOkdLxHxwt/Hyo+cl47bZU0QADg+Qt5DJwni3SbYGXeGMB5cBcw==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-clike.min.js integrity="sha512-/Rynaa6ehLZJO9fdk+EUsgiOdJqFSFUB4Qgy+gP4vU4U1DrmPJWypfXe1CgyaV7rRdZjGxdpLe9djxhx1ZHvqQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-c.min.js integrity="sha512-8VrjxGFLIkS0mgEmO3p46A5OkqATHhrNVwyv2V7yUeZrk1jmSDuI3SOEpC9XHEHUWEOsfzzcJeBlUkee9lKGrw==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-cpp.min.js integrity="sha512-namzGTZvHaug0jeipHRN2pMepMiJj+EbrloktVFlMYGnA0EwZhbdLeENjBYLCgoghVbZGinIz/FFYHmB0o3wLw==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js integrity="sha512-uOw7XYETzS/DPmmirpP5UCMihSDNMeyTS965J0/456OSPfxn9xEtHHjj5Q/5WefVdqyMfN/afmQnNpZd/tpkcA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js integrity="sha512-AKaNmg8COK0zEbjTdMHJAPJ0z6VeNqvRvH4/d5M4sHJbQQUToMBtodq4HaV4fa+WV2UTfoperElm66c9/8cKmQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js integrity="sha512-jwrwRWZWW9J6bjmBOJxPcbRvEBSQeY4Ad0NEXSfP0vwYi/Yu9x5VhDBl3wz6Pnxs8Rx/t1P8r9/OHCRciHcT7Q==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js integrity="sha512-xKcnbsdT0KMoA4yrozkqZM1XJVTrPsjdQwvigxlAlxEDu8YDvC/jl+LfVqn0fY3Vs6m2y4a89JCHEIA/Z9zpmQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-csharp.min.js integrity="sha512-pmt3kb6dRndjFXFFwCa3rSzuUQ0GjeCfC5QULWde+8ZBIsUzuP1heOIOSAMfAyXHSufrrTp8h7UHw85K4IJ2/g==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js integrity="sha512-whYhDwtTmlC/NpZlCr6PSsAaLOrfjVg/iXAnC4H/dtiHawpShhT2SlIMbpIhT/IL/NrpdMm+Hq2C13+VKpHTYw==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-ruby.min.js integrity="sha512-/Dti0iV9cxgJe8r0U/89YJIv9ZBQu1ExEWffVyBj4juMQ4GNglQ3TQ0Up4gcbiHvg0g87arcUFbKBtw2PxH1Dw==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-go.min.js integrity="sha512-w200Nz1i9KgDNi+IpPMgpZBVRIvfVK/V5vskyHjkz7XJkVnRJcb1uNmpiHhDv0/Ln+GG2VqScKKz/1izBfg64Q==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-less.min.js integrity="sha512-lL5HvfIycntK04Iiai/VTsyuj7mvDkhz9k+cA8fqXr932s4jLJ1YwplIs6Dhpw0pzVwAe1jGe8sGwbyuHG44QQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-scss.min.js integrity="sha512-aczOaJ+mB9uGT6dMJbDaUsS2PWG+XII+1ypFQ0L22Z132V6kMM6m70pQssXsPAFmLI5xkgx/hknBuUuJIJKZfA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js integrity="sha512-uMdVuOpm+9lNPCT7mV/YaMb9YQ/R4+eeON7aEMj6Ig/f4BoU+Q5k6iaZkDsX7LH9cjTHZt0CuKxbzd0/fndrWA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js integrity="sha512-QXFMVAusM85vUYDaNgcYeU3rzSlc+bTV4JvkfJhjxSHlQEo+ig53BtnGkvFTiNJh8D+wv6uWAQ2vJaVmxe8d3w==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-yaml.min.js integrity="sha512-6O/PZimM3TD1NN3yrazePA4AbZrPcwt1QCGJrVY7WoHDJROZFc9TlBvIKMe+QfqgcslW4lQeBzNJEJvIMC8WhA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-batch.min.js integrity="sha512-tPgIjUKiv2HcUAIWXA3v6G4cNuWXkoMsF+ibxfHLnp+/s1C3Bw5/qp78+JjhrfoyWIiHXHx0LtH4M/LAwyQqWg==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-lisp.min.js integrity="sha512-W461RnQzrhSCQQMfEGFKOHbK2DuJTVxrXs2PzctPaxV3A+qPB/TcnMgucSsBNkyccNK8VoENBsAnbf/SuBE71g==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin=anonymous></script>
<script>renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]});for(var inlineMathArray=document.querySelectorAll("script[type='math/tex']"),inlineMath,tex,replaced,displayMathArray,displayMath,i=0;i<inlineMathArray.length;i++)inlineMath=inlineMathArray[i],tex=inlineMath.innerText||inlineMath.textContent,replaced=document.createElement("span"),replaced.innerHTML=katex.renderToString(tex,{displayMode:!1}),inlineMath.parentNode.replaceChild(replaced,inlineMath);displayMathArray=document.querySelectorAll("script[type='math/tex; mode=display']");for(i=0;i<displayMathArray.length;i++)displayMath=displayMathArray[i],tex=displayMath.innerHTML,replaced=document.createElement("span"),replaced.innerHTML=katex.renderToString(tex.replace(/%.*/g,""),{displayMode:!0}),displayMath.parentNode.replaceChild(replaced,displayMath)</script></body></html>
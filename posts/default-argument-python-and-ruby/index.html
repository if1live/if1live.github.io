<!doctype html><html class=no-js lang=ko><head><meta charset=utf-8><meta name=generator content="Hugo 0.110.0"><title>삽질로 알아보는 파이썬과 루비의 기본 매개변수 &#183; /usr/lib/libsora.so</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=naver-site-verification content="2ddc1a56777489f4a64a4f6a59822f8b1c1ea502"><meta name=google-site-verification content="VsvNNnJZUV-iLEYKNju16p-HtDqZeqL15H-VVy-HwpA"><meta name=gc:client-id content="785d47c81cbc2fd42b65"><meta name=gc:client-secret content="5e5d558f0b16fae154aa47fc9d94f7c09e540ec7"><meta name=author content="if1live"><meta name=description content="삽질로 알아보는 파이썬과 루비의 기본 매개변수"><meta name=keywords content="ruby,python,default argument,default parameter value,optional parameter"><meta name=twitter:card content="summary"><meta name=og:url content="https://if1live.github.io/posts/default-argument-python-and-ruby/"><meta name=twitter:site content="@if1live"><meta name=twitter:title content="삽질로 알아보는 파이썬과 루비의 기본 매개변수"><meta name=twitter:description content="파이썬과 루비의 문법 차이로 인한 버그를 당한적은 자주 있었지만 글로 다룰 생각까진 (게을러서) 하지 않았다. 하지만 아래의 글을 읽고 파이썬와 루비의 차이로 인한 버그를 정리해보면 재밌을거라고 생각했다. 그래서 써보기로 했다.
루비와 파이썬에서 함수 호출과 함수 참조에 대한 차이
기본 매개변수를 이용해서 낚시를 해보자. (얼마나 낚일지는 모르지만) Def"><meta name=twitter:image:src content="https://www.gravatar.com/avatar/fb9672e7e0d256f39369595381d1ea07"><link rel=stylesheet href=https://if1live.github.io/css/style-gen.css?2><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link href=https://if1live.github.io/index.xml rel=alternate type=application/rss+xml title=/usr/lib/libsora.so><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/themes/prism.min.css integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/plugins/line-numbers/prism-line-numbers.min.css integrity="sha512-cbQXwDFK7lj2Fqfkuxbo5iD1dSbLlJGXGpfTDqbggqjHJeyzx88I3rfwjS38WJag/ihH7lzuGlGHpDBymLirZQ==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin=anonymous><script type=text/javascript>var host="if1live.github.io";host==window.location.host&&window.location.protocol!="https:"?window.location.protocol="https":console.log("skip https redirect")</script><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script>
<script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-3043297488880636",enable_page_level_ads:!0})</script></head><body><header class=header><h1 class=font-monospace><a href=https://if1live.github.io/>/usr/lib/libsora.so</a></h1><nav><h2 hidden>Navigation</h2><ul class=nav-link-list><li><a href=https://if1live.github.io/tags/ title=tags><i class="fa fa-tags"><span hidden>Tags</span></i></a></li><li><a href=https://if1live.github.io/search/ title=search><i class="fa fa-search"><span hidden>Search</span></i></a></li></ul></nav></header><div class=container><article class="basic-content article-content"><header><hgroup class=entry-title><a href=/posts/default-argument-python-and-ruby/ rel=bookmark title="Permalink to 삽질로 알아보는 파이썬과 루비의 기본 매개변수"><h1>삽질로 알아보는 파이썬과 루비의 기본 매개변수</h1><h2>Default Argument X (Python, Ruby)</h2></a></hgroup></header><footer class=post-info><abbr class=published title=2016-02-18T00:00:00Z>2016/02/18</abbr><address class="vcard author">By <a href=//twitter.com/if1live>@if1live</a></address><ul class="list-of-tags tags-in-article"><li><a href=/tags/ruby>#ruby</a></li><li><a href=/tags/python>#python</a></li><li><a href=/tags/default-argument>#default argument</a></li><li><a href=/tags/default-parameter-value>#default parameter value</a></li><li><a href=/tags/optional-parameter>#optional parameter</a></li></ul></footer><section class=entry-content><p>파이썬과 루비의 문법 차이로 인한 버그를 당한적은 자주 있었지만 글로 다룰
생각까진 (게을러서) 하지 않았다. 하지만 아래의 글을 읽고 파이썬와 루비의
차이로 인한 버그를 정리해보면 재밌을거라고 생각했다. 그래서 써보기로
했다.</p><p><a href=http://blog.nacyot.com/articles/2014-12-17-diffrence-of-ruby-and-python/>루비와 파이썬에서 함수 호출과 함수 참조에 대한
차이</a></p><p>기본 매개변수를 이용해서 낚시를 해보자. (얼마나 낚일지는 모르지만)
<a href=https://en.wikipedia.org/wiki/Default_argument>Default argument</a> 를
남들이 기본 매개변수라고 번역하길래 기본 매개변수라고 적었지만 디폴트
매개변수, 기본 인자 등등으로도 불리는거같다. 용어를 하나로 합치려고
default argument 만을 사용하겠다.</p><h2 id=문제1-다음-코드의-실행-결과는>문제1. 다음 코드의 실행 결과는?</h2><p>간단한 파이썬, 루비 코드이다. Default parameter에는 현재 시간이
들어간다. 현재 시간을 찍는 함수를 호출하고 1초 쉬고 다시 현재 시간을
찍는 함수를 부른다. 어떤 실행 결과가 나올지 생각해보자.</p><pre><code class=language-python>#!/usr/bin/env python

import datetime
import time

def run(now = datetime.datetime.now()):
    print(now)

run()
time.sleep(1)
run()
</code></pre><pre><code class=language-ruby>#!/usr/bin/env ruby

require 'time'

def run(now = Time.now())
  puts now
end

run
sleep 1
run
</code></pre><pre><code class=language-bash>$ python default_argument.py
2016-03-04 00:42:59.921858
2016-03-04 00:42:59.921858
</code></pre><pre><code class=language-bash>$ ruby default_argument.rb
2016-03-04 00:43:01 +0900
2016-03-04 00:43:02 +0900
</code></pre><p>파이썬에서는 같은 시간이 2번 찍혔다. 루비에서는 1초 차이나는 시간이
찍혔다. 파이썬에서는 default argument는 미리 계산된 값을 사용하고
루비에서는 함수 호출할때 계산하는거같다.</p><h2 id=문제2-다음-코드의-실행-결과는>문제2. 다음 코드의 실행 결과는?</h2><p>함수 기본값은 언제 계산될까? 이를 확인하기 위해서 간단한 코드를 짰다.</p><p>&ldquo;foo called&rdquo; 를 출력하는 <code>foo()</code> 라는 함수를 만들었다. <code>foo()</code> 를
default argument로 사용하는 <code>bar()</code> 라는 함수를 만들었다. <code>foo()</code>,
<code>bar()</code> 는 만들었을뿐 실제로 호출하진 않았다. 파이썬과 루비의 출력
결과는?</p><pre><code class=language-python>#!/usr/bin/env python

def foo():
    print(&quot;foo called&quot;)

def bar(a = foo()):
    print(&quot;bar called&quot;)
</code></pre><pre><code class=language-ruby>#!/usr/bin/env ruby

def foo
  puts &quot;foo called&quot;
end

def bar(a = foo())
  puts &quot;bar called&quot;
end
</code></pre><pre><code class=language-bash>$ python initial.py
foo called
</code></pre><pre><code class=language-bash>$ ruby initial.rb
</code></pre><p>함수를 호출한적이 없는데 파이썬에서는 &ldquo;foo called&rdquo; 가 찍혔다. 루비는
foo(), bar() 로 인한 출력이 없다. 파이썬에서는 소스를 읽으면서 default
argument를 계산하나보다.</p><h2 id=language-specification>Language specification</h2><p>&ldquo;원래 파이썬과 루비는 이렇게 행동하는게 정상입니다&rdquo; 라고 끝내면 심심하니
언어 스펙을 뒤져보자.</p><h3 id=python>Python</h3><p>파이썬 3.5 Language Reference 를 뒤져보면 함수 기본값과 관련된 정보를
찾을 수 있다. <strong>8.6. Function definitions</strong> 에 나와있다.
<a href=https://docs.python.org/3.5/reference/compound_stmts.html#function-definitions>https://docs.python.org/3.5/reference/compound_stmts.html#function-definitions</a></p><blockquote><p><strong>Default parameter values are evaluated from left to right when the
function definition is executed.</strong> This means that the expression is
evaluated once, when the function is defined, and that the same
“pre-computed” value is used for each call&mldr;</p></blockquote><p>파이썬에서는 Default argument를 <strong>Default paramter value</strong> 라고 부른다.
default paramter value는 함수가 정의될때 평가되서 정해지고 이후 함수
호출에서는 미리 계산된 값을 사용한다.</p><h3 id=ruby>Ruby</h3><p><strong>Programming Languages — Ruby IPA Ruby Standardization WG Draft August
25, 2010</strong> 를 참고했다. <a href=https://www.ipa.go.jp/files/000011432.pdf>https://www.ipa.go.jp/files/000011432.pdf</a>
<strong>13.3.2 Method parameters</strong> , <strong>13.3.3 Method invocation</strong> 에서 Default
argument와 연관된 것을 찾을 수 있다.</p><blockquote><p>13.3.2 Method parameters</p><p>Optional parameters: These parameters are represented by
optional-parameters. Each optional parameter consists of a parameter
name represented by optional-parameter-name and an expression
represented by default-parameter-expression. For each optional
parameter, when there is no corresponding argument in the list of
arguments given to the method invocation, the value of the
default-parameter-expression is used as the value of the argument.</p><p>13.3.3 Method invocation</p><p>7.i. For each optional parameter POi to which no argument corresponds,
evaluate the default-parameter-expression of POi, and let X be the
resulting value.</p></blockquote><p>루비에서는 Default argument를 <strong>Optional parameter</strong> 라고 부른다. 함수
호출 시점에 optional parameter에 대응되는 argument가 넘어오지 않으면
(함수 호출시 기본값을 대신할 값을 넣지 않은 경우) default parameter
expression을 평가해서 인자로 사용한다.</p></section><ul class=articles-timeline><li class=previous-article><a href=https://if1live.github.io/posts/multiple-assignment-python-and-ruby/ title="Next: 예제로 보는 Python과 Ruby의 문법 차이 - Multiple Assignment">예제로 보는 Python과 Ruby의 문법 차이 - Multiple Assignment<br><small>Multiple Assignment with (Python 2.x, Python 3.x, Ruby)</small></a></li><li class=next-article><a href=https://if1live.github.io/posts/make-int-from-invalid-value-python-and-ruby/ title="Previous: 올바르지 않은 값을 정수로 변환하기 - 파이썬 vs 루비">올바르지 않은 값을 정수로 변환하기 - 파이썬 vs 루비<br><small>같은 목적, 다른 언어, 다른 결과</small></a></li></ul><section class=entry-content><section class=disqus-section><h1 hidden>Comment</h1><div id=disqus_thread></div><script type=text/javascript>var host="if1live.github.io",disqus_shortname,disqus_identifier;host==window.location.host?(disqus_shortname="libsora",disqus_identifier="http://if1live.github.io/posts/default-argument-python-and-ruby/",function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()):console.log("skip disqus")</script><noscript>Please enable JavaScript to view the <a href=//disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=//disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></section></article></div><footer class=footer><ul class=nav-link-list><li><a href=//twitter.com/if1live title=Twitter><i class="fa fa-twitter"></i></a></li><li><a href=//github.com/if1live title=GitHub><i class="fa fa-github"></i></a></li><li><a href=//bitbucket.org/if1live title=BitBucket><i class="fa fa-bitbucket"></i></a></li><li><a href=https://if1live.github.io/index.xml><i class="fa fa-rss"></i></a></li></ul><p><a href=//gohugo.io/ title=Hugo>Hugo</a> |
<a href=//twitter.com/if1live/ title=@if1live>@if1live</a></p></footer><script src=/js/common.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/prism.min.js integrity="sha512-pSVqGtpGygQlhN8ZTHXx1kqkjQr30eM+S6OoSzhHGTjh6DKdfy7WZlo1DNO9bhtM0Imf6xNLznZ7iVC2YUMwJQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/plugins/line-numbers/prism-line-numbers.min.js integrity="sha512-dubtf8xMHSQlExGRQ5R7toxHLgSDZ0K7AunqPWHXmJQ8XyVIG19S1T95gBxlAeGOK02P4Da2RTnQz0Za0H0ebQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-clike.min.js integrity="sha512-/Rynaa6ehLZJO9fdk+EUsgiOdJqFSFUB4Qgy+gP4vU4U1DrmPJWypfXe1CgyaV7rRdZjGxdpLe9djxhx1ZHvqQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-c.min.js integrity="sha512-8VrjxGFLIkS0mgEmO3p46A5OkqATHhrNVwyv2V7yUeZrk1jmSDuI3SOEpC9XHEHUWEOsfzzcJeBlUkee9lKGrw==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-cpp.min.js integrity="sha512-UYkJiZs5kymKJMPLLVBpexawnvmoh9jMW9H10z96GF8ldp6SDS8FI4BhBMa2rbHoCyc8mc8gSAMgqIj6NXtmYg==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-typescript.min.js integrity="sha512-uOw7XYETzS/DPmmirpP5UCMihSDNMeyTS965J0/456OSPfxn9xEtHHjj5Q/5WefVdqyMfN/afmQnNpZd/tpkcA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-python.min.js integrity="sha512-AKaNmg8COK0zEbjTdMHJAPJ0z6VeNqvRvH4/d5M4sHJbQQUToMBtodq4HaV4fa+WV2UTfoperElm66c9/8cKmQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-javascript.min.js integrity="sha512-VO0P6Z9Sapwza0d0oiGt76iOVbaJYeLEDQPVJV7N8T+TOPzeAhz4wGtqFa8Pv/mYpgD1Hm3jU4NslIDVlijyDg==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-java.min.js integrity="sha512-Ofz52khK2GpJagclW2MrjJ8eum/j47Tllh7HiIyB+IpDNRhr98LNspUJZ8RlotjArl8tQbf52Y2e1i/W/TxDJA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-csharp.min.js integrity="sha512-NohR0FaHlz90CtXG/syKPx9DUzzupUltzyiY0RrNsOryPY3NIusNThXSiusO+tIrTfgqRBvANPqBej/O+FKf2w==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-bash.min.js integrity="sha512-ZqfG//sXQwAA7DOArFJyMmZQ3knKe+0ft3tPQZPvDPJR04IatmhVO5pTazVV+fLVDYSy28PhoBeUj5wxGRiGAA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-ruby.min.js integrity="sha512-/Dti0iV9cxgJe8r0U/89YJIv9ZBQu1ExEWffVyBj4juMQ4GNglQ3TQ0Up4gcbiHvg0g87arcUFbKBtw2PxH1Dw==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-go.min.js integrity="sha512-w200Nz1i9KgDNi+IpPMgpZBVRIvfVK/V5vskyHjkz7XJkVnRJcb1uNmpiHhDv0/Ln+GG2VqScKKz/1izBfg64Q==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-less.min.js integrity="sha512-lL5HvfIycntK04Iiai/VTsyuj7mvDkhz9k+cA8fqXr932s4jLJ1YwplIs6Dhpw0pzVwAe1jGe8sGwbyuHG44QQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-scss.min.js integrity="sha512-aczOaJ+mB9uGT6dMJbDaUsS2PWG+XII+1ypFQ0L22Z132V6kMM6m70pQssXsPAFmLI5xkgx/hknBuUuJIJKZfA==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-css.min.js integrity="sha512-Jv/EO8zjSyqIDa2S0YjCGFY+mEROxud6g7AhfA0KcggjdzhPBhoRyetxV7G7/dnfBdZBzcOvpRn1K+J6sn3jyw==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-json.min.js integrity="sha512-QXFMVAusM85vUYDaNgcYeU3rzSlc+bTV4JvkfJhjxSHlQEo+ig53BtnGkvFTiNJh8D+wv6uWAQ2vJaVmxe8d3w==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-yaml.min.js integrity="sha512-/oDzFMYD7kk0uSmERPYzNTGBREQ2mZGYoorj8utUwL4ZWlOuvEWZx8ZJlhsC8XJEnUTKkXXnRh+Wp6ywIx1Qfg==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-batch.min.js integrity="sha512-bBPg+8MazXGrcD6KljRj3G/1ys1VnNro8UqYTVJ2aqlf/8w4xAsDtUXiNqaKqi2YG7Jiu+0MzXJ/WYTKcfgOzQ==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-lisp.min.js integrity="sha512-OdRCYv/rRTwewSGidXYslYI1PU5qjCQbwkF8MJomC0p/AvwHxfOxJOdQbittuP0Vu/sY8AXWM6wxTJmff5LFmw==" crossorigin=anonymous referrerpolicy=no-referrer></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.8.3/mermaid.min.js integrity="sha512-+TNmhaRJf3jyYHTpzEq/5I6b+aGyhzWb21mGdHAjxSGSYwxN9Grug3Y3B9qVxWfKKY8MscE/6mr9walWvFLFvQ==" crossorigin=anonymous></script>
<script>mermaid.initialize({startOnLoad:!0}),function(){const e=document.querySelectorAll("code.language-mermaid");for(let t=0;t<e.length;t++){const s=`mermaid-${t}`,n=e[t],o=n.innerText,i=e=>{const t=document.createElement("div");t.innerHTML=e,n.parentElement.replaceWith(t)};mermaid.render(s,o,i)}}()</script><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin=anonymous></script>
<script>renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]});for(var inlineMathArray=document.querySelectorAll("script[type='math/tex']"),inlineMath,tex,replaced,displayMathArray,displayMath,i=0;i<inlineMathArray.length;i++)inlineMath=inlineMathArray[i],tex=inlineMath.innerText||inlineMath.textContent,replaced=document.createElement("span"),replaced.innerHTML=katex.renderToString(tex,{displayMode:!1}),inlineMath.parentNode.replaceChild(replaced,inlineMath);displayMathArray=document.querySelectorAll("script[type='math/tex; mode=display']");for(i=0;i<displayMathArray.length;i++)displayMath=displayMathArray[i],tex=displayMath.innerHTML,replaced=document.createElement("span"),replaced.innerHTML=katex.renderToString(tex.replace(/%.*/g,""),{displayMode:!0}),displayMath.parentNode.replaceChild(replaced,displayMath)</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-37862172-2"></script>
<script>var host="if1live.github.io";if(host==window.location.host){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-37862172-2")}else console.log("skip google analytics")</script></body></html>